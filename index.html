<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BRIDGE HUD</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  :root {
    --bg-color: #000;
    --grid-color: rgba(255, 255, 255, 0.02);
    --text-color: #FF1A1A;
    --widget-border: #FF1A1A;
    --glow-color: #FF0000;
  }

  body {
    margin: 0;
    background-color: var(--bg-color);
    font-family: 'Press Start 2P', monospace;
    color: var(--text-color);
    position: relative;
  }

  /* scanline / grid background */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
      linear-gradient(to bottom, var(--grid-color) 1px, transparent 1px),
      linear-gradient(to right, var(--grid-color) 1px, transparent 1px);
    background-size: 20px 20px;
    pointer-events: none;
    z-index: 0;
  }

  h1 {
    text-align: center;
    font-size: 3rem;
    margin: 20px auto;
    letter-spacing: 0.15em;
    color: var(--text-color);
    text-shadow: none; /* no glow */
    white-space: nowrap;
    overflow: hidden;
    border-right: 2px solid var(--text-color);
    animation: typewriter 3s steps(30, end);
    width: 14ch;
    position: relative;
    z-index: 1;
  }

  @keyframes typewriter {
    from { width: 0; }
    to { width: 14ch; }
  }

  .mode-btn {
    display: block;
    margin: 10px auto 20px;
    background: var(--text-color);
    color: var(--bg-color);
    border: none;
    padding: 10px 20px;
    font-size: 0.8rem;
    cursor: pointer;
    font-family: 'Press Start 2P', monospace;
    z-index: 1;
    position: relative;
  }

  .container {
    width: 95vw;
    max-width: 1400px;
    margin: 0 auto 40px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    z-index: 1;
    position: relative;
  }

  .widget {
    background-color: rgba(0,0,0,0.8);
    border: 2px solid var(--widget-border);
    border-radius: 8px;
    box-shadow: 0 0 8px var(--glow-color);
    position: relative;
    display: flex;
    flex-direction: column;
  }

  iframe {
    border: none;
    width: 100%;
    height: 500px; /* default full height for full-width widgets */
    flex-grow: 1;
  }

  /* two-column layout for the bottom widgets */
  .split {
    display: flex;
    gap: 20px;
  }
  .split .widget {
    flex: 1;
  }
  .split iframe {
    height: 400px;
  }

  .refresh-btn {
    position: absolute;
    top: 5px;
    right: 5px;
    background: var(--text-color);
    color: var(--bg-color);
    border: none;
    font-size: 0.5rem;
    padding: 4px 6px;
    cursor: pointer;
    font-family: 'Press Start 2P', monospace;
    z-index: 2;
  }

  .refresh-btn:hover { background: #ff4d4d; }

  @media (max-width: 768px) {
    .split {
      flex-direction: column;
    }
    iframe {
      height: 300px;
    }
  }
</style>
</head>
<body>
  <h1>BRIDGE HUD</h1>
  <button class="mode-btn" onclick="toggleMode()">DAY / NIGHT</button>

  <div class="container">
    <!-- AIS Marine Traffic -->
    <div class="widget">
      <button class="refresh-btn" onclick="reloadFrame('ais')">REFRESH</button>
      <iframe id="ais" 
        src="https://www.marinetraffic.com/en/ais/embed/zoom:10/centery:41.8781/centerx:-87.6298/showmenu:false/shownames:false/maptype:1"
        allowfullscreen loading="lazy"></iframe>
    </div>

    <!-- Weather Radar -->
    <div class="widget">
      <button class="refresh-btn" onclick="reloadFrame('radar')">REFRESH</button>
      <iframe id="radar"
        src="https://embed.windy.com/embed2.html?lat=41.8781&lon=-87.6298&zoom=8&radar=1&level=surface"
        allowfullscreen loading="lazy"></iframe>
    </div>

    <!-- Moon Phase + Current Weather -->
    <div class="split">
      <div class="widget">
        <button class="refresh-btn" onclick="reloadFrame('moon')">REFRESH</button>
        <iframe id="moon"
          src="https://dimden.dev/moon?custom=1&textColor=%23FF0000"
          title="Moon Phase" loading="lazy"></iframe>
      </div>
      <div class="widget">
        <button class="refresh-btn" onclick="reloadFrame('wx')">REFRESH</button>
        <iframe id="wx"
          src="https://forecast7.com/en/41d88n87d63/chicago/?unit=us"
          title="Chicago Weather" loading="lazy"></iframe>
      </div>
    </div>
  </div>

<script>
  function reloadFrame(id) {
    const frame = document.getElementById(id);
    frame.src = frame.src;
  }

  function toggleMode() {
    const root = document.documentElement;
    const current = getComputedStyle(root).getPropertyValue('--text-color').trim();
    if (current === '#FF1A1A') {
      // switch to green day mode
      root.style.setProperty('--text-color', '#00FF00');
      root.style.setProperty('--widget-border', '#00FF00');
      root.style.setProperty('--glow-color', '#00FF00');
      document.querySelector('.mode-btn').style.background = '#00FF00';
      document.querySelector('.mode-btn').style.color = '#000';
    } else {
      // switch back to red night mode
      root.style.setProperty('--text-color', '#FF1A1A');
      root.style.setProperty('--widget-border', '#FF1A1A');
      root.style.setProperty('--glow-color', '#FF0000');
      document.querySelector('.mode-btn').style.background = '#FF1A1A';
      document.querySelector('.mode-btn').style.color = '#000';
    }
  }
</script>
</body>
</html>
